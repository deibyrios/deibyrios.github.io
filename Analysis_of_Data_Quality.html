<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Analysis of Data Quality</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<link href="libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<style type="text/css">
  body {
    padding-top: 20px;
  }
  .navbar-brand {
    font-weight: bold;
  }
  footer {
    border-top: 1px solid #CCC;
    margin-top: 60px;
    margin-bottom: 48px;
    opacity: 0.75;
  }
  .content-body>:first-child, .content-body>:first-child>:first-child {
    margin-top: 0 !important;
  }
  p code {
    white-space: inherit;
  }
  .leaflet-container {
    margin: 0 0 10.5px;
  }
</style>

<div class="fluid-row">
  <div class="col-sm-12">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <a class="navbar-brand" href="./">EDAV final Project  -  2nd Ave NYC Line subway</a>
        </div>
      </div>
    </nav>
  </div>
</div>

<div class="fluid-row">
  <div class="col-sm-3">
    <div class="list-group">
      <a class="list-group-item" href="./">Introduction</a>
      <a class="list-group-item" href="Description_of_Data.html">Description of Data</a>
      <a class="list-group-item" href="Analysis_of_Data_Quality.html">Analysis of Data Quality</a>
      <a class="list-group-item" href="EDA-Building_Permits.html">EDA - Building Permits</a>
      <a class="list-group-item" href="EDA-Real_State_Sales.html">EDA - Real State Sales</a>
      <a class="list-group-item" href="EDA-Property_Market_Values.html">EDA - Property Market Values</a>
      <a class="list-group-item" href="EDA-Property_Assessed_Values.html">EDA - Property Assessed Values</a>
      <a class="list-group-item" href="Executive_Summary.html">Executive Summary</a>
      <a class="list-group-item" href="Interactive_Component.html">Interactive Component</a>
      <a class="list-group-item" href="Conclusion.html">Conclusion</a>
      <a class="list-group-item" href="Suggested_Grading.html">Suggested Grading</a>   
<!--      <a class="list-group-item" href="showhide.html">Show/Hide Layers</a>
      <a class="list-group-item" href="choropleths.html">Choropleths</a>
      <a class="list-group-item" href="projections.html">Projections</a>
      <a class="list-group-item" href="morefeatures.html">Additional Features</a>-->
    </div>
    <script>
      // manage active state of toc based on current page
      var href = window.location.pathname;
      href = href.substr(href.lastIndexOf('/') + 1);
      if (href === "" || href === "index.html")
        href = "./";
      $('a.list-group-item[href="' + href + '"]').addClass('active');
    </script>
  </div>
  <div class="col-sm-9 content-body">

<div class="fluid-row" id="header">




</div>


<div id="analysis-of-data-quality" class="section level2">
<h2>Analysis of Data Quality</h2>
<div id="includes-data-cleaning-process" class="section level4">
<h4>(includes data cleaning process)</h4>
</div>
<div id="remodeling-of-existing-and-construction-of-new-buildings" class="section level3">
<h3>Remodeling of existing and construction of new buildings</h3>
<p>As mentioned in the <a href="Description_of_Data.html">Description of Data</a>, the dataset we were able to get, shows the details for every building permit filed with the Department of Buildings, from 1990 to date. This dataset is a list of building permits filed for a particular day and associated data and contains building permits for both new buildings and alterations / remodeling.</p>
<p>After downloading the original dataset (1.4GB, 3,341,659 observations),read it, take a look at it and inspected variables/column names:</p>
<pre class="r"><code>library(tidyverse)
permits &lt;- read.csv(&quot;data/DOB_Permit_Issuance.csv&quot;)
#head(permits)
colnames(permits) #print variables / column names</code></pre>
<pre><code>##  [1] &quot;BOROUGH&quot;                          &quot;House..&quot;                         
##  [3] &quot;Street.Name&quot;                      &quot;Job..&quot;                           
##  [5] &quot;Job.Type&quot;                         &quot;Self_Cert&quot;                       
##  [7] &quot;Block&quot;                            &quot;Lot&quot;                             
##  [9] &quot;Community.Board&quot;                  &quot;Zip.Code&quot;                        
## [11] &quot;Bldg.Type&quot;                        &quot;Residential&quot;                     
## [13] &quot;Special.District.1&quot;               &quot;Special.District.2&quot;              
## [15] &quot;Work.Type&quot;                        &quot;Permit.Status&quot;                   
## [17] &quot;Filing.Status&quot;                    &quot;Permit.Type&quot;                     
## [19] &quot;Permit.Sequence..&quot;                &quot;Permit.Subtype&quot;                  
## [21] &quot;Oil.Gas&quot;                          &quot;Site.Fill&quot;                       
## [23] &quot;Filing.Date&quot;                      &quot;Issuance.Date&quot;                   
## [25] &quot;Expiration.Date&quot;                  &quot;Job.Start.Date&quot;                  
## [27] &quot;Permittee.s.First.Name&quot;           &quot;Permittee.s.Last.Name&quot;           
## [29] &quot;Permittee.s.Business.Name&quot;        &quot;Permittee.s.Phone..&quot;             
## [31] &quot;Permittee.s.License.Type&quot;         &quot;Act.as.Superintendent&quot;           
## [33] &quot;Superintendent.First...Last.Name&quot; &quot;Superintendent.Business.Name&quot;    
## [35] &quot;Owner.s.Business.Type&quot;            &quot;Non.Profit&quot;                      
## [37] &quot;Owner.s.Business.Name&quot;            &quot;Owner.s.First.Name&quot;              
## [39] &quot;Owner.s.Last.Name&quot;                &quot;Owner.s.House..&quot;                 
## [41] &quot;Owner.s.House.Street.Name&quot;        &quot;Ownerâ..s.House.City&quot;            
## [43] &quot;Ownerâ..s.House.State&quot;            &quot;Ownerâ..s.House.Zip.Code&quot;        
## [45] &quot;Owner.s.Phone..&quot;                  &quot;DOBRunDate&quot;                      
## [47] &quot;PERMIT_SI_NO&quot;                     &quot;LATITUDE&quot;                        
## [49] &quot;LONGITUDE&quot;                        &quot;COUNCIL_DISTRICT&quot;                
## [51] &quot;CENSUS_TRACT&quot;                     &quot;NTA_NAME&quot;</code></pre>
<p><br></p>
<p>We were able to find a Data Dictionary containing field codes and descriptions of the data sets, which can be downloaded <a href="https://data.cityofnewyork.us/api/views/ipu4-2q9a/files/87608d5b-1986-4a21-a8a5-7a38e65f9993?download=true&amp;filename=DD_DOB_Permit_Issuance_2018-03-07.xlsx" title="Data Dictionary for building permits">here</a>.</p>
<p>This is a brief description of the variables of our interest:</p>
<ul>
<li><strong>BOROUGH</strong>: The name of the NYC borough</li>
<li><strong>House</strong>: The house number for the building</li>
<li><strong>Street Name</strong>: The street name (combined with house number completes the address)</li>
<li><strong>Zip Code</strong>: ZIP Code for the building’s address</li>
<li><strong>Job Type</strong>: Type of job to be performed.</li>
<li><strong>Block</strong>: Tax Block number of the location (assigned by by the Department of Finance)</li>
<li><strong>Lot</strong>: Tax Lot number of the location (assigned by by the Department of Finance)</li>
<li><strong>Bldg Type</strong>: Legal occupancy classification</li>
<li><strong>Work Type</strong>: The specific type of work covered by the permit.</li>
<li><strong>Filing Date</strong>: The date the permit application was filed with DOB.</li>
<li><strong>Owner’s Business Type</strong>: The type of entity that owns the building.</li>
</ul>
<p>Now we proceed to filter Manhattan Zip codes that are within the area of influence of phase1 and phase 2 of the 2nd Ave Line project (10065, 10021, 10075, 10028, 10128, 10029, 10035) and selected the columns of our interest:</p>
<pre class="r"><code>#filter Manahattan zip codes of interest:
permits_upper_east &lt;- filter(permits, BOROUGH==&quot;MANHATTAN&quot; &amp; Zip.Code %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035))

#Select relevant columns of our interest:
permits_upper_east &lt;- select(permits_upper_east, House..,Street.Name,Job.Type,Block,Lot,Zip.Code,
                    Bldg.Type,Work.Type,Filing.Date,Owner.s.Business.Type)
#head(permits_upper_east)
#write.table(permits_upper_east, file=&quot;DOB_Permit_Issuance_filtered.csv&quot;,sep=&quot;,&quot;,row.names=F)</code></pre>
<p>After filtering and selecting variables of our interest, now we look for missing data using extracat::visna():</p>
<pre class="r"><code>#install.packages(&#39;extracat&#39;)
library(extracat)
visna(permits_upper_east)</code></pre>
<p><img src="Analysis_of_Data_Quality_files/figure-html/unnamed-chunk-4-1.png" /><!-- --></p>
<p>As we can see in the graph above, the quality of the data is very good, with just very few rows missing the Building Type column.</p>
<p>The variables “Block” and “Lot” are of our special interest as those were the main variables used four our main Exploratory Data Analysis as we describe later.</p>
</div>
<div id="real-estate-sales" class="section level3">
<h3>Real Estate Sales</h3>
<p>In the real estate data, we are able to find all of the sales transactions in New York City since 2003. Because the relevancy of the new subway line and the size of the real estate dataset, we’ve narrowed the dataset down from 2014 to early 2018, which is a few years right before the Q line had opened to today, and to the surrounding zip codes near the phase 1 Q line. This dataset also includes different types of real estate assets, such as a commercial property and apartment units. As these two assets are not comparable, we’ve narrowed it down to apartment units, which is where tax class is 2.</p>
<p>We know that price is likely the biggest indicator to the effects of the Q line on the real estate market, we begin by looking at a boxplot of all of the prices in zip codes 10065,10021, 10075, 10128, 10028 ,10029. As shown below, we can see that prices are highly skewed and have many outliers.</p>
<pre class="r"><code>library(&quot;readxl&quot;)
library(reshape)
#install.packages(&#39;RSQLite&#39;)
library(&quot;RSQLite&quot;)</code></pre>
<p>Importing files</p>
<pre class="r"><code>data_ues_1718  &lt;- read.csv(file=&quot;data/all_ues_sales_geocode_2017-2018.csv&quot;, header=TRUE, sep=&quot;,&quot;)
boxplot(data_ues_1718$SALE.PRICE)</code></pre>
<p><img src="Analysis_of_Data_Quality_files/figure-html/unnamed-chunk-6-1.png" /><!-- --></p>
<pre class="r"><code>#note, this is for 17/18 data only</code></pre>
<p>In the boxplot above, I’ve shown a sample of 2017-2018 data with tax class 2 because the original dataset is too big. However, the rest of 2014-2016 have similar trends in outliers.</p>
<p>When we went through the datasets, we could see many real estate transactions at price 0 or above 10s of millions! We believe that some properties were sold at a low price as a transaction between family members, and that there are actually relatively few numbers of properties sold above five millions. Therefore, we’ve narrowed down to looking at properties between 100K and 5M. We do this for both the datasets from NYC DoF and the Baruch dataset.</p>
<pre class="r"><code># source: NYC DoF
data_ues_1718  &lt;- read.csv(file=&quot;data/all_ues_sales_geocode_2017-2018.csv&quot;, header=TRUE, sep=&quot;,&quot;)
colnames(data_ues_1718)[colnames(data_ues_1718) == &quot;SALE.PRICE&quot;] &lt;- &#39;price&#39;
colnames(data_ues_1718)[colnames(data_ues_1718) == &quot;YEAR&quot;] &lt;- &#39;year&#39;
colnames(data_ues_1718)[colnames(data_ues_1718) == &quot;ZIP.CODE&quot;] &lt;- &#39;zipcode&#39;
colnames(data_ues_1718)[colnames(data_ues_1718) == &quot;TAX.CLASS.AT.PRESENT&quot;] &lt;- &#39;TaxClass&#39;
data_ues_1718 &lt;- data_ues_1718[data_ues_1718$price &gt; 100000,]
data_ues_1718 &lt;- data_ues_1718[data_ues_1718$price &lt; 5000000,]</code></pre>
<pre class="r"><code>#Baruch College
# 
# sqlite&lt;- dbDriver(&quot;SQLite&quot;)
# realestate &lt;- dbConnect(sqlite,&quot;/Users/sharontsao/Desktop/2003-2016 NYC_geocoded_real_estate_sales/NYC_RealEstate_Sales.sqlite&quot;)
# 
# dbListTables(realestate)
# 
# data_all = dbGetQuery(realestate,&#39;select sale_id, year, nbhd, block, lot, address, zip, sale_date, price, long, lat
#                       from yr_2016 where zip in (10065,10021, 10075, 10028 ,10029) 
#                       AND usable = &quot;True&quot; 
#                       AND tax_cls_s = 2
#                       AND price &gt; 100000
#                       AND price &lt; 5000000
#                       
#             UNION
#                       select sale_id, year, nbhd, block, lot, address, zip, sale_date, price, long, lat
#                       from yr_2015 where zip in (10065,10021, 10075, 10028 ,10029) 
#                       AND usable = &quot;True&quot; 
#                       AND tax_cls_s = 2
#                       AND price &gt; 100000
#                       AND price &lt; 5000000
# 
#             UNION
# 
#                       select sale_id, year, nbhd, block, lot, address, zip, sale_date, price, long, lat
#                       from yr_2014 where zip in (10065,10021, 10075, 10028 ,10029) 
#                       AND usable = &quot;True&quot; 
#                       AND tax_cls_s = 2
#                       AND price &gt; 100000
#                       AND price &lt; 5000000&#39;)</code></pre>
<p>With the Baruch dataset above, I’ve only shown the code and the output because the dataset is also too big to import to github. <br> The above steps lay the groudwork of the dataset of focus. These are a brief description of the columns we’re using: <br> - <strong>Tax Class</strong>: The class of the building helps us identify the real estate type (Houses, Apartments, Building) <br> - <strong>Block</strong>: Block number helps us identify the location of the block <br> - <strong>Lot</strong>: Lot number helps us identify the location of the lot <br> - <strong>Zip Code</strong>: Zip code of the real estate property <br> - <strong>Sale Date</strong>: Date the real estate transaction was closed <br> - <strong>Sale Price</strong>: Price the buyer paid for <br> - <strong>Lat/Long</strong>: The Coordinates of the real estate property <br></p>
<p>We’re using these variables to help us analyze trends in real estate prices.</p>
</div>
<div id="property-market-values" class="section level3">
<h3>Property Market Values</h3>
<p>As mentioned in the <a href="Description_of_Data.html">Description of Data</a>, we were able to find the property market values from 2018 back to 2008 with 12 datasets in total, <strong>one dataset for each year</strong> except 2008 that contains 2 different datasets the needed to be combined.</p>
<p>We were able to find a Data Dictionary containing field codes and descriptions of the data sets, which can be accessed <a href="http://www1.nyc.gov/assets/finance/downloads/tar/tarfieldcodes.pdf" title="Data Dictionary for property market values">here</a>.</p>
<p>After downloading and extracting the zip files for all the original datasets we read each dataset, take a look at it, read the corresponding Data Dictionary and inspect variables/column names. The data consists of Access databases so we used RODBC library to read the databases using “odbcConnectAccess(‘my_Access_Database_to_read.mdb’)”.</p>
<p><strong>Note:</strong> The original 12 Access databases have a total size of 4.34Gb, take too long time to be read and can’t be uploaded to GitHub, so we included the following commented code just <strong>to document our work</strong>, but we uploaded the smaller data after filtering and selecting our variables of interest.</p>
<pre class="r"><code># library(tidyverse)
# #install.packages(&#39;RODBC&#39;)
# library(RODBC)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_19.mdb&quot;)
# property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(property)
# #colnames(property) #print variables / column names
# 
# property_upper_east &lt;- property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2018)
# str(property_upper_east) 
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_18.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2017)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_17.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2016)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_16.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2015)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_15.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2014)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_14.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2013)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_13.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2012)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_12.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2011)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_11.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2010)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_10.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;avroll&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;% 
#   filter(B==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2009)
# str(new_property_upper_east) 
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_09_class 1.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;tc1&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;%
#   mutate(FULLVAL = NEW_FV_T) %&gt;%
#   filter(BORO==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2008)
# str(new_property_upper_east)
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# #str(property_upper_east)
# #write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)
# 
# mdbConnect&lt;-odbcConnectAccess(&quot;avroll_09_class 2,3,4.mdb&quot;)
# new_property &lt;- sqlFetch(mdbConnect,&quot;tc234&quot;)
# odbcClose(mdbConnect)
# #head(new_property)
# #colnames(new_property) #print variables / column names
# 
# new_property_upper_east &lt;- new_property %&gt;%
#   mutate(FULLVAL = NEW_FV_T) %&gt;%
#   filter(BORO==1 &amp; ZIP %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;% select(BLOCK,LOT,BLDGCL,FULLVAL) %&gt;%
#     mutate(Year = 2008)
# str(new_property_upper_east)
# 
# property_upper_east &lt;- rbind.data.frame(new_property_upper_east, property_upper_east)
# str(property_upper_east)
# #Next, we write a new file &#39;property_upper_east.csv&#39; in the working directory, for future use whenever we need to read the data again, because reading the original files takes too long time:
# write.table(property_upper_east, file=&quot;property_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)</code></pre>
<p>This is a brief description of the variables of our interest utilized in the code above:</p>
<ul>
<li>BORO: The name of the NYC borough</li>
<li>ZIP: ZIP Code for the property’s address</li>
<li>BLOCK: Tax Block number of the location (assigned by by the Department of Finance)</li>
<li>LOT: Tax Lot number of the location (assigned by by the Department of Finance)</li>
<li>BLDGCL: 2 digits building class code (see codes <a href="http://www1.nyc.gov/assets/finance/jump/hlpbldgcode.html" title="Building class Codes">here</a>)</li>
<li>FULLVAL/NEW_FV_T: Total next market value estimated for next fiscal year</li>
</ul>
<p>After filtering zip codes in the area of influence of phase1 and phase 2 of the 2nd Ave Line project (10065, 10021, 10075, 10028, 10128, 10029, 10035) and selecting variables of our interest, we looked for missing data using extracat::visna(), but we got ‘Error in visna(property_upper_east) : No NA’s in the data’, so we used mi::missing_data.frame() instead, just to double check:</p>
<pre class="r"><code>#library(tidyverse)
property_upper_east &lt;- read.csv(&quot;data/property_upper_east.csv&quot;) #already filtered and selected data
#install.packages(&#39;extracat&#39;)
library(mi)
show(missing_data.frame(property_upper_east))</code></pre>
<pre><code>## Object of class missing_data.frame with 299333 observations on 5 variables
## 
## There are 1 missing data patterns
## 
## Append &#39;@patterns&#39; to this missing_data.frame to access the corresponding pattern for every observation or perhaps use table()
## 
##                          type missing method model
## BLOCK              continuous       0   &lt;NA&gt;  &lt;NA&gt;
## LOT                continuous       0   &lt;NA&gt;  &lt;NA&gt;
## BLDGCL  unordered-categorical       0   &lt;NA&gt;  &lt;NA&gt;
## FULLVAL            continuous       0   &lt;NA&gt;  &lt;NA&gt;
## Year               continuous       0   &lt;NA&gt;  &lt;NA&gt;
## 
##         family link transformation
## BLOCK     &lt;NA&gt; &lt;NA&gt;    standardize
## LOT       &lt;NA&gt; &lt;NA&gt;    standardize
## BLDGCL    &lt;NA&gt; &lt;NA&gt;           &lt;NA&gt;
## FULLVAL   &lt;NA&gt; &lt;NA&gt;    standardize
## Year      &lt;NA&gt; &lt;NA&gt;    standardize</code></pre>
<p>No we confirmed that there are no NA’s in the data so the quality of the data is very good.</p>
<p>Again, the variables “Block” and “Lot” are of our special interest as those were the main variables used four our main Exploratory Data Analysis as we describe later.</p>
</div>
<div id="property-assessed-values" class="section level3">
<h3>Property Assessed Values</h3>
<p>As mentioned in the <a href="Description_of_Data.html">Description of Data</a>, we were able to find property “Assessed Values” from 2003 to 2017 in the “Primary Land Use Tax Lot Output” (PLUTO) dataset, developed by the New York City Department of City Planning’s (DCP).</p>
<p>We were able to find a Data Dictionary containing field codes and descriptions of the data sets, which can be accessed <a href="http://www1.nyc.gov/assets/planning/download/pdf/data-maps/open-data/pluto_datadictionary.pdf" title="Data Dictionary for property assessed values">here</a>.</p>
<p>After downloading and extracting the zip files for the original datasets we read each dataset, take a look at it, read the corresponding Data Dictionary and inspect variables/column names. The datasets are shapefiles so we used the “foreign” library to read the data files of the shapefiles using “read.dbf(‘my_shapefile_to_read.dbf’)”.</p>
<p><strong>Note:</strong> The original 15 datasets are an extensive land use and geographic data at the tax lot level, containing more than seventy fields derived from data maintained by different city agencies so they have a large size, take too long time to be read and can’t be uploaded to GitHub, so we included the following commented code just <strong>to document our work</strong>, but we uploaded the smaller data after filtering and selecting our variables of interest.</p>
<pre class="r"><code># library(tidyverse)
# library(foreign) #used to read .dbf files
# 
# PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/mn_mappluto_17v1_1/MNMapPLUTO.dbf&quot;)
# #head(PLUTO)
# 
# PLUTO &lt;- PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2017)
# str(PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_16/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2016)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_15/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2015)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_14/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2014)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_13/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2013)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_12/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2012)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_11/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2011)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_10/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2010)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_09/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2009)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_08/MNMapPLUTO.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2008)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_07/mnmappluto.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2007)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_06/mnmappluto.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(Block,Lot,BldgClass,AssessTot,XCoord,YCoord) %&gt;%
#   mutate(Year = 2006)
# str(New_PLUTO)
# 
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_05/mnmappluto.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZIPCODE %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(BLOCK,LOT,BLDGCLASS,ASSESSTOT,XCOORD,YCOORD) %&gt;%
#   mutate(Year = 2005)
# str(New_PLUTO)
# 
# colnames(New_PLUTO) &lt;- c(&quot;Block&quot;,&quot;Lot&quot;,&quot;BldgClass&quot;,&quot;AssessTot&quot;,&quot;XCoord&quot;,&quot;YCoord&quot;,&quot;Year&quot;)
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_04/mnmappluto.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(ZIPCODE %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(BLOCK,LOT,BLDGCLASS,ASSESSTOTA,XCOORD,YCOORD) %&gt;%
#   mutate(Year = 2004)
# str(New_PLUTO)
# 
# colnames(New_PLUTO) &lt;- c(&quot;Block&quot;,&quot;Lot&quot;,&quot;BldgClass&quot;,&quot;AssessTot&quot;,&quot;XCoord&quot;,&quot;YCoord&quot;,&quot;Year&quot;)
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# 
# New_PLUTO &lt;- read.dbf(&quot;c:/Users/yenny/Downloads/Columbia/Exploratory Data/final project/Market Values 2009-2019/Mappluto/Manhattan_03/mnmappluto.dbf&quot;)
# #head(New_PLUTO)
# 
# New_PLUTO  &lt;- New_PLUTO %&gt;%
#   filter(zipCode %in% c(10065, 10021, 10075, 10028, 10128, 10029, 10035)) %&gt;%
#   select(block,lot,bldgClass,assessTotl,xCoord,yCoord) %&gt;%
#   mutate(Year = 2003)
# str(New_PLUTO)
# 
# colnames(New_PLUTO) &lt;- c(&quot;Block&quot;,&quot;Lot&quot;,&quot;BldgClass&quot;,&quot;AssessTot&quot;,&quot;XCoord&quot;,&quot;YCoord&quot;,&quot;Year&quot;)
# PLUTO &lt;- rbind.data.frame(New_PLUTO, PLUTO)
# str(PLUTO)
# 
# #Next, we write a new file &#39;property_upper_east.csv&#39; in the working directory, for future use whenever we need to read the data again, because reading the original files takes too long time:
# write.table(PLUTO, file=&quot;PLUTO_upper_east.csv&quot;,sep=&quot;,&quot;,row.names=F)</code></pre>
<p>This is a brief description of the variables of our interest utilized in the code above:</p>
<ul>
<li>ZipCode: ZIP Code for the property’s address</li>
<li>Block: Tax Block number of the location (assigned by by the Department of Finance)</li>
<li>Lot: Tax Lot number of the location (assigned by by the Department of Finance)</li>
<li>BldgClass: 2 digits building class code (see codes <a href="http://www1.nyc.gov/assets/finance/jump/hlpbldgcode.html" title="Building class Codes">here</a>)</li>
<li>AssessTot: Total Property Assessed Value</li>
</ul>
<p>After filtering zip codes in the area of influence of phase1 and phase 2 of the 2nd Ave Line project (10065, 10021, 10075, 10028, 10128, 10029, 10035) and selecting variables of our interest, we looked for missing data using extracat::visna(), but we got ‘Error in visna(property_upper_east) : No NA’s in the data’, so we used mi::missing_data.frame() instead, just to double check:</p>
<pre class="r"><code>#library(tidyverse)
property_upper_east &lt;- read.csv(&quot;data/PLUTO_upper_east.csv&quot;) #already filtered and selected data
#install.packages(&#39;extracat&#39;)
library(mi)
show(missing_data.frame(property_upper_east))</code></pre>
<pre><code>## Object of class missing_data.frame with 130111 observations on 7 variables
## 
## There are 1 missing data patterns
## 
## Append &#39;@patterns&#39; to this missing_data.frame to access the corresponding pattern for every observation or perhaps use table()
## 
##                            type missing method model
## Block                continuous       0   &lt;NA&gt;  &lt;NA&gt;
## Lot                  continuous       0   &lt;NA&gt;  &lt;NA&gt;
## BldgClass unordered-categorical       0   &lt;NA&gt;  &lt;NA&gt;
## AssessTot            continuous       0   &lt;NA&gt;  &lt;NA&gt;
## XCoord               continuous       0   &lt;NA&gt;  &lt;NA&gt;
## YCoord               continuous       0   &lt;NA&gt;  &lt;NA&gt;
## Year                 continuous       0   &lt;NA&gt;  &lt;NA&gt;
## 
##           family link transformation
## Block       &lt;NA&gt; &lt;NA&gt;    standardize
## Lot         &lt;NA&gt; &lt;NA&gt;    standardize
## BldgClass   &lt;NA&gt; &lt;NA&gt;           &lt;NA&gt;
## AssessTot   &lt;NA&gt; &lt;NA&gt;    standardize
## XCoord      &lt;NA&gt; &lt;NA&gt;    standardize
## YCoord      &lt;NA&gt; &lt;NA&gt;    standardize
## Year        &lt;NA&gt; &lt;NA&gt;    standardize</code></pre>
<p>No we confirmed that there are no NA’s in the data so the quality of the data is very good.</p>
<p>Same than for the analysis for building permits and the analysis for property market values, the variables “Block” and “Lot” are of our special interest as those were the main variables used four our main Exploratory Data Analysis as we describe later.</p>
</div>
<div id="other-datasets" class="section level3">
<h3>Other Datasets?</h3>
<p>Add other datasets here if any. <em>Provide a detailed, well-organized description of data quality, including textual description, graphs, and code</em></p>
</div>
</div>

<footer>
<p><small>Work Developed for our EDAV final project.
</small></p>
</footer>

  </div>
</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
